<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéâ Spin & Win ‚Çπ500 - Sea Salt Pickles | Pickles, Powders, Masalas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C63FF;
            --primary-dark: #5A52D5;
            --secondary: #FF6B6B;
            --success: #27AE60;
            --warning: #F39C12;
            --gold: #FFD700;
            --bg-dark: #1A1A2E;
            --bg-card: #16213E;
            --bg-light: #0F3460;
            --text-white: #FFFFFF;
            --text-light: #B8B8D1;
            --text-muted: #6C6C8A;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-gold: linear-gradient(135deg, #f5af19 0%, #f12711 100%);
            --shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            --shadow-glow: 0 0 30px rgba(108, 99, 255, 0.4);
            --radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 20% 80%, rgba(108, 99, 255, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(255, 215, 0, 0.1) 0%, transparent 40%);
            animation: bgMove 20s ease-in-out infinite;
        }

        @keyframes bgMove {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-5%, -5%) rotate(5deg); }
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--gold);
            border-radius: 50%;
            opacity: 0.6;
            animation: float 15s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(720deg); opacity: 0; }
        }

        /* Header */
        .header {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 700;
        }

        .logo-icon {
            font-size: 28px;
        }

        .wallet-display {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient-gold);
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 600;
            color: #1A1A2E;
            box-shadow: 0 4px 15px rgba(245, 175, 25, 0.4);
        }

        .wallet-display.has-balance {
            animation: walletPulse 2s infinite;
        }

        @keyframes walletPulse {
            0%, 100% { box-shadow: 0 4px 15px rgba(245, 175, 25, 0.4); }
            50% { box-shadow: 0 4px 25px rgba(245, 175, 25, 0.7); }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 30px;
            background: var(--bg-card);
            border: 2px solid transparent;
            border-radius: 50px;
            color: var(--text-light);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-btn:hover {
            background: var(--bg-light);
            border-color: var(--primary);
        }

        .tab-btn.active {
            background: var(--gradient-1);
            color: white;
            border-color: transparent;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Spin Section */
        .spin-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        .promo-banner {
            text-align: center;
            margin-bottom: 20px;
        }

        .promo-banner h1 {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(90deg, #FFD700, #FF6B6B, #6C63FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200%; }
            100% { background-position: 200%; }
        }

        .promo-banner p {
            color: var(--text-light);
            font-size: 16px;
        }

        /* Wheel Container */
        .wheel-container {
            position: relative;
            width: 320px;
            height: 320px;
        }

        .wheel-outer {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #FF6B6B 0deg 45deg,
                #6C63FF 45deg 90deg,
                #FFD700 90deg 135deg,
                #27AE60 135deg 180deg,
                #FF6B6B 180deg 225deg,
                #6C63FF 225deg 270deg,
                #FFD700 270deg 315deg,
                #27AE60 315deg 360deg
            );
            box-shadow: 
                0 0 0 8px var(--bg-light),
                0 0 0 12px var(--primary),
                0 0 40px rgba(108, 99, 255, 0.5),
                inset 0 0 30px rgba(0, 0, 0, 0.3);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .wheel-outer.spinning {
            animation: none;
        }

        .wheel-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            z-index: 10;
        }

        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid var(--gold);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            z-index: 20;
        }

        /* Wheel Segments Text */
        .wheel-segment {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 25px;
            font-weight: 700;
            font-size: 11px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .wheel-segment:nth-child(1) { transform: rotate(22.5deg); }
        .wheel-segment:nth-child(2) { transform: rotate(67.5deg); }
        .wheel-segment:nth-child(3) { transform: rotate(112.5deg); }
        .wheel-segment:nth-child(4) { transform: rotate(157.5deg); }
        .wheel-segment:nth-child(5) { transform: rotate(202.5deg); }
        .wheel-segment:nth-child(6) { transform: rotate(247.5deg); }
        .wheel-segment:nth-child(7) { transform: rotate(292.5deg); }
        .wheel-segment:nth-child(8) { transform: rotate(337.5deg); }

        /* Spin Button */
        .spin-btn {
            padding: 18px 60px;
            font-size: 18px;
            font-weight: 700;
            color: white;
            background: var(--gradient-gold);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 8px 30px rgba(245, 175, 25, 0.4);
            position: relative;
            overflow: hidden;
        }

        .spin-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .spin-btn:hover::before {
            left: 100%;
        }

        .spin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(245, 175, 25, 0.5);
        }

        .spin-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            box-shadow: none;
        }

        .spin-btn:disabled:hover {
            transform: none;
        }

        .spin-btn:disabled::before {
            display: none;
        }

        /* Login Form */
        .login-form {
            background: var(--bg-card);
            padding: 30px;
            border-radius: var(--radius);
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 25px;
            font-size: 22px;
            color: var(--text-white);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-light);
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-light);
            border: 2px solid transparent;
            border-radius: 10px;
            color: var(--text-white);
            font-size: 15px;
            font-family: inherit;
            transition: var(--transition);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(108, 99, 255, 0.2);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .form-group .error {
            color: var(--secondary);
            font-size: 12px;
            margin-top: 6px;
            display: none;
        }

        .form-group.invalid input {
            border-color: var(--secondary);
        }

        .form-group.invalid .error {
            display: block;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: var(--gradient-1);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.4);
        }

        /* Result Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            padding: 40px;
            border-radius: var(--radius);
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: modalPop 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        @keyframes modalPop {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal.win {
            border-color: var(--gold);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
        }

        .modal.win::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: rotateGlow 3s linear infinite;
        }

        @keyframes rotateGlow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .modal-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .modal h2 {
            font-size: 28px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .modal.win h2 {
            color: var(--gold);
        }

        .modal p {
            color: var(--text-light);
            margin-bottom: 25px;
            font-size: 16px;
            position: relative;
            z-index: 1;
        }

        .modal .amount {
            font-size: 48px;
            font-weight: 800;
            color: var(--gold);
            margin: 20px 0;
            position: relative;
            z-index: 1;
        }

        .modal-btn {
            padding: 14px 40px;
            background: var(--gradient-1);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.4);
        }

        /* Already Spun Message */
        .already-spun {
            background: var(--bg-card);
            padding: 30px;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .already-spun h3 {
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .already-spun p {
            color: var(--text-muted);
        }

        /* Shop Section */
        .shop-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
            border-color: var(--primary);
        }

        .product-image {
            height: 150px;
            background: var(--bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .product-info {
            padding: 15px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .product-price {
            color: var(--gold);
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 10px;
            background: var(--gradient-1);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .add-to-cart-btn:hover {
            opacity: 0.9;
        }

        /* Cart Sidebar */
        .cart-sidebar {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 100px;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cart-header h3 {
            font-size: 18px;
        }

        .cart-count-badge {
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .cart-items {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .cart-item-image {
            width: 50px;
            height: 50px;
            background: var(--bg-light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .cart-item-price {
            font-size: 14px;
            color: var(--gold);
            font-weight: 600;
        }

        .cart-item-qty {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .qty-btn {
            width: 28px;
            height: 28px;
            background: var(--bg-light);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .qty-btn:hover {
            background: var(--primary);
        }

        .qty-value {
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .remove-item {
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
            transition: var(--transition);
        }

        .remove-item:hover {
            transform: scale(1.2);
        }

        .cart-empty {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
        }

        .cart-empty-icon {
            font-size: 50px;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        /* Category Filter Buttons */
        .category-filter-btn {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 2px solid transparent;
            border-radius: 25px;
            color: var(--text-light);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .category-filter-btn:hover {
            background: var(--bg-light);
            border-color: var(--primary);
        }

        .category-filter-btn.active {
            background: var(--gradient-1);
            color: white;
            border-color: transparent;
        }

        /* Product Category Tag */
        .product-category-tag {
            font-size: 10px;
            color: var(--primary);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        /* Product Image Styling */
        .product-card .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        /* Cart Summary */
        .cart-summary {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .summary-row.total {
            font-size: 18px;
            font-weight: 700;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 12px;
        }

        .summary-row .wallet-applied {
            color: var(--success);
            font-weight: 600;
        }

        .wallet-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(39, 174, 96, 0.2);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--success);
        }

        .checkout-btn {
            width: 100%;
            padding: 14px;
            background: var(--gradient-gold);
            border: none;
            border-radius: 10px;
            color: #1A1A2E;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 15px;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 175, 25, 0.4);
        }

        .checkout-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
        }

        /* Confetti Animation */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2000;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* User Info Display */
        .user-info {
            background: var(--bg-light);
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            background: var(--gradient-1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 700;
        }

        .user-details h4 {
            font-size: 15px;
            margin-bottom: 3px;
        }

        .user-details p {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--bg-card);
            padding: 15px 25px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: var(--shadow);
            transform: translateX(150%);
            transition: var(--transition);
            z-index: 3000;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toast.active {
            transform: translateX(0);
        }

        .toast.success {
            border-color: var(--success);
        }

        .toast.error {
            border-color: var(--secondary);
        }

        .toast-icon {
            font-size: 24px;
        }

        .toast-message {
            font-size: 14px;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .shop-section {
                grid-template-columns: 1fr;
            }

            .cart-sidebar {
                position: static;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            .promo-banner h1 {
                font-size: 28px;
            }

            .wheel-container {
                width: 280px;
                height: 280px;
            }

            .modal {
                padding: 30px 20px;
            }

            .modal .amount {
                font-size: 36px;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header-content {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .tabs {
                flex-direction: column;
                align-items: stretch;
            }

            .tab-btn {
                text-align: center;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .wheel-container {
                width: 260px;
                height: 260px;
            }

            .login-form {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    
    <!-- Floating Particles -->
    <div class="particles" id="particles"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="https://www.seasaltpickles.com" class="logo" style="text-decoration:none;">
                <img src="https://static.wixstatic.com/media/163af4_1a88c8f7a40d44f3a2ed6a0d10586dd4~mv2.jpg/v1/fill/w_60,h_60,al_c,q_80/Sea%20salt%20pickles%20logo.jpg" alt="Sea Salt Pickles" style="width:45px;height:45px;border-radius:50%;border:2px solid var(--gold);">
                <span>Sea Salt Pickles</span>
            </a>
            <div class="wallet-display" id="walletDisplay">
                <span>üí∞</span>
                <span>Wallet: ‚Çπ<span id="walletAmount">0</span></span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="spin">üé° Spin & Win</button>
            <button class="tab-btn" data-tab="shop">üõí Shop & Redeem</button>
        </div>

        <!-- Spin Tab Content -->
        <div class="tab-content active" id="spinTab">
            <div class="spin-section">
                <div class="promo-banner">
                    <h1>üéâ Spin & Win ‚Çπ500!</h1>
                    <p>Try your luck and win wallet credits instantly!</p>
                </div>

                <!-- User Info (shown after login) -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-details">
                        <h4 id="userName">User Name</h4>
                        <p id="userPhone">+91 XXXXXXXXXX</p>
                    </div>
                </div>

                <!-- Login Form (shown initially) -->
                <div class="login-form" id="loginForm">
                    <h2>üîê Login to Spin</h2>
                    <div class="form-group" id="nameGroup">
                        <label for="name">Your Name *</label>
                        <input type="text" id="name" placeholder="Enter your full name" maxlength="50">
                        <span class="error">Please enter your name</span>
                    </div>
                    <div class="form-group" id="phoneGroup">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" placeholder="10-digit mobile number" maxlength="10">
                        <span class="error">Please enter a valid 10-digit phone number</span>
                    </div>
                    <button class="login-btn" id="loginBtn">Login & Get Ready to Spin</button>
                </div>

                <!-- Already Spun Message -->
                <div class="already-spun" id="alreadySpun" style="display: none;">
                    <h3>‚ö†Ô∏è You've Already Played!</h3>
                    <p>Each phone number can only spin once. Check your wallet if you won!</p>
                </div>

                <!-- Wheel Container -->
                <div class="wheel-container" id="wheelContainer" style="display: none;">
                    <div class="wheel-pointer"></div>
                    <div class="wheel-outer" id="wheel">
                        <div class="wheel-segment">TRY AGAIN</div>
                        <div class="wheel-segment">‚Çπ500 üéâ</div>
                        <div class="wheel-segment">OOPS!</div>
                        <div class="wheel-segment">SO CLOSE</div>
                        <div class="wheel-segment">TRY AGAIN</div>
                        <div class="wheel-segment">‚Çπ500 üéâ</div>
                        <div class="wheel-segment">NEXT TIME</div>
                        <div class="wheel-segment">ALMOST!</div>
                    </div>
                    <div class="wheel-inner">üéØ</div>
                </div>

                <!-- Spin Button -->
                <button class="spin-btn" id="spinBtn" disabled style="display: none;">
                    üé∞ SPIN NOW!
                </button>
            </div>
        </div>

        <!-- Shop Tab Content -->
        <div class="tab-content" id="shopTab">
            <div class="shop-section">
                <!-- Products Grid -->
                <div>
                    <h2 style="margin-bottom: 20px;">üõçÔ∏è Our Products</h2>
                    
                    <!-- Category Filters -->
                    <div class="category-filters" style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 25px;">
                        <button class="category-filter-btn active" data-category="all" onclick="filterByCategory('all')">All</button>
                        <button class="category-filter-btn" data-category="Veg Pickles" onclick="filterByCategory('Veg Pickles')">ü•¨ Veg Pickles</button>
                        <button class="category-filter-btn" data-category="Non Veg Pickles" onclick="filterByCategory('Non Veg Pickles')">üçó Non Veg</button>
                        <button class="category-filter-btn" data-category="Masalas & Podis" onclick="filterByCategory('Masalas & Podis')">üå∂Ô∏è Masalas</button>
                        <button class="category-filter-btn" data-category="Sweets & Snacks" onclick="filterByCategory('Sweets & Snacks')">üç™ Sweets</button>
                        <button class="category-filter-btn" data-category="Combos" onclick="filterByCategory('Combos')">üéÅ Combos</button>
                    </div>
                    
                    <div class="products-grid" id="productsGrid">
                        <!-- Products will be rendered here -->
                    </div>
                </div>

                <!-- Cart Sidebar -->
                <div class="cart-sidebar">
                    <div class="cart-header">
                        <h3>üõí Your Cart</h3>
                        <span class="cart-count-badge" id="cartCountBadge">0</span>
                    </div>
                    
                    <div class="cart-items" id="cartItems">
                        <div class="cart-empty">
                            <div class="cart-empty-icon">üõí</div>
                            <p>Your cart is empty</p>
                        </div>
                    </div>

                    <div class="cart-summary" id="cartSummary" style="display: none;">
                        <div class="summary-row">
                            <span>Cart Total</span>
                            <span id="cartTotalDisplay">‚Çπ0</span>
                        </div>
                        <div class="summary-row" id="walletAppliedRow" style="display: none;">
                            <span>
                                <span class="wallet-badge">üí∞ Wallet Applied</span>
                            </span>
                            <span class="wallet-applied" id="walletAppliedAmount">-‚Çπ0</span>
                        </div>
                        <div class="summary-row total">
                            <span>Amount to Pay</span>
                            <span id="finalAmount">‚Çπ0</span>
                        </div>
                        <button class="checkout-btn" id="checkoutBtn" disabled>
                            Proceed to Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="resultModal">
        <div class="modal" id="modalContent">
            <div class="modal-icon" id="modalIcon">üéâ</div>
            <h2 id="modalTitle">Congratulations!</h2>
            <p id="modalMessage">You've won wallet credits!</p>
            <div class="amount" id="modalAmount" style="display: none;">‚Çπ500</div>
            <button class="modal-btn" id="modalBtn">Awesome!</button>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon" id="toastIcon">‚úÖ</span>
        <span class="toast-message" id="toastMessage">Item added to cart!</span>
    </div>

    <script>
        // =====================================================
        // CONFIGURATION
        // =====================================================
        const CONFIG = {
            WIN_PROBABILITY: 20,  // 1 in 20 users wins (5%)
            WIN_AMOUNT: 500,      // ‚Çπ500 wallet credit
            SPIN_DURATION: 5000,  // 5 seconds spin
            LOCAL_STORAGE_KEYS: {
                USERS: 'spinWheel_users',
                SPIN_COUNT: 'spinWheel_spinCount',
                WALLET: 'spinWheel_wallet',
                CURRENT_USER: 'spinWheel_currentUser',
                CART: 'spinWheel_cart'
            }
        };

        // Real Products from seasaltpickles.com
        const PRODUCTS = [
            // VEG PICKLES
            { id: 1, name: "Pandu Mirchi Pachadi", price: 300, icon: "üå∂Ô∏è", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_1383b71f1c1541f78e702c5364c59f09~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_1383b71f1c1541f78e702c5364c59f09~mv2.jpg" },
            { id: 2, name: "Gongura Nilva Pachadi", price: 330, icon: "ü•¨", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_d3504025073140cab435c56935e0a2ef~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_d3504025073140cab435c56935e0a2ef~mv2.jpg" },
            { id: 3, name: "Coriander Nilva Pachadi", price: 330, icon: "üåø", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_df7b35b3764a4fb0888e24e5e0e7facb~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_df7b35b3764a4fb0888e24e5e0e7facb~mv2.jpg" },
            { id: 4, name: "Dhaniyala Maagaya", price: 330, icon: "ü•≠", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_44f8a3dc204f49c781d426335bf62ad8~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_44f8a3dc204f49c781d426335bf62ad8~mv2.jpg" },
            { id: 5, name: "Amla Patchadi", price: 330, icon: "üü¢", category: "Veg Pickles", image: "https://static.wixstatic.com/media/163af4_23da098b073749529dca236bbdb68880~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_23da098b073749529dca236bbdb68880~mv2.jpg" },
            { id: 6, name: "Ginger Pickle", price: 330, icon: "ü´ö", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_fd749ebdc8b345a0843acca96e7f6114~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_fd749ebdc8b345a0843acca96e7f6114~mv2.jpg" },
            { id: 7, name: "Avakaya", price: 330, icon: "ü•≠", category: "Veg Pickles", image: "https://static.wixstatic.com/media/163af4_58038c71b77b4b8eae82c58c8e4f9b5c~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_58038c71b77b4b8eae82c58c8e4f9b5c~mv2.jpg" },
            { id: 8, name: "Tomato Pickle", price: 300, icon: "üçÖ", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_315289d09db24d65a1b33ecab2a2a8e9~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_315289d09db24d65a1b33ecab2a2a8e9~mv2.jpg" },
            { id: 9, name: "Mint Pickle", price: 330, icon: "üåø", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_f21bc86babaf464dbf6d199bdaa3de15~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_f21bc86babaf464dbf6d199bdaa3de15~mv2.jpg" },
            { id: 10, name: "Maagaya", price: 330, icon: "ü•≠", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_ad2fb569d13446b8a80e30ec17ec1c2d~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_ad2fb569d13446b8a80e30ec17ec1c2d~mv2.jpg" },
            { id: 11, name: "Lemon Pickle", price: 330, icon: "üçã", category: "Veg Pickles", image: "https://static.wixstatic.com/media/163af4_4b0acd7a2e6048bd8f740d24f8f33a6a~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_4b0acd7a2e6048bd8f740d24f8f33a6a~mv2.jpg" },
            { id: 12, name: "Mixed Vegetable Avakaya", price: 300, icon: "ü•ó", category: "Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_cf6497e892ba4f1b9ecc11129f7b6325~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_cf6497e892ba4f1b9ecc11129f7b6325~mv2.jpg" },
            // NON VEG PICKLES
            { id: 13, name: "Chicken Pickle with Bone", price: 540, icon: "üçó", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_4a25ae4fca044360a5317828d4bf9dc3~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_4a25ae4fca044360a5317828d4bf9dc3~mv2.jpg" },
            { id: 14, name: "Gongura Chicken Boneless", price: 630, icon: "üçó", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_99a38423b54b4327828de1ef6b257a46~mv2.png/v1/fill/w_300,h_300,al_c,q_85/53b0e3_99a38423b54b4327828de1ef6b257a46~mv2.png" },
            { id: 15, name: "Chicken Pickle Boneless", price: 630, icon: "üçó", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_bd4b8d8643724c3dbbded34896cc40c4~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_bd4b8d8643724c3dbbded34896cc40c4~mv2.jpg" },
            { id: 16, name: "Mutton Kheema Pickle", price: 1000, icon: "üçñ", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_3be3a6d6eeb44946828b9b967a645931~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_3be3a6d6eeb44946828b9b967a645931~mv2.jpg" },
            { id: 17, name: "Gongura Prawns", price: 850, icon: "ü¶ê", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_6a2ee4df6cfe45bfa571742350b0a551~mv2.png/v1/fill/w_300,h_300,al_c,q_85/53b0e3_6a2ee4df6cfe45bfa571742350b0a551~mv2.png" },
            { id: 18, name: "Prawn Pickle", price: 800, icon: "ü¶ê", category: "Non Veg Pickles", image: "https://static.wixstatic.com/media/53b0e3_52f7a2f8bf9b4e95975f93aa19b63c26~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/53b0e3_52f7a2f8bf9b4e95975f93aa19b63c26~mv2.jpg" },
            // MASALAS & PODIS
            { id: 19, name: "Kura Karam", price: 300, icon: "üå∂Ô∏è", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_a97d93f9ec1a4dfb95de4954b433d257~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_a97d93f9ec1a4dfb95de4954b433d257~mv2.jpg" },
            { id: 20, name: "Turmeric Powder", price: 125, icon: "üü°", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_76e4b86c589c416fb6d30ecdf540fd66~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_76e4b86c589c416fb6d30ecdf540fd66~mv2.jpg" },
            { id: 21, name: "Munagaaku Karam", price: 80, icon: "üåø", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_8e4278b579364734ba7ff3650898bcf8~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_8e4278b579364734ba7ff3650898bcf8~mv2.jpg" },
            { id: 22, name: "Pudina Karam", price: 80, icon: "üåø", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_625bd2ee00b7403aa27e238f8f270290~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_625bd2ee00b7403aa27e238f8f270290~mv2.jpg" },
            { id: 23, name: "Karivepaku Karam", price: 80, icon: "üçÉ", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_1f3cc39a9ba543ed881feb8ae3a27ce0~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_1f3cc39a9ba543ed881feb8ae3a27ce0~mv2.jpg" },
            { id: 24, name: "Kara Podi", price: 80, icon: "üå∂Ô∏è", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_a2bfe3454c4e456cb2b6aedc429a3484~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_a2bfe3454c4e456cb2b6aedc429a3484~mv2.jpg" },
            { id: 25, name: "Garam Masala", price: 80, icon: "ü´ô", category: "Masalas & Podis", image: "https://static.wixstatic.com/media/163af4_02d29cde3ae1441fb01b32dcde60046f~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_02d29cde3ae1441fb01b32dcde60046f~mv2.jpg" },
            // SWEETS & SNACKS
            { id: 26, name: "Dry Fruit Laddu", price: 350, icon: "üç™", category: "Sweets & Snacks", image: "https://static.wixstatic.com/media/163af4_e6a395f4ac2549f5a77ad25f2ec23b60~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_e6a395f4ac2549f5a77ad25f2ec23b60~mv2.jpg" },
            { id: 27, name: "Flax Seeds Laddu", price: 220, icon: "üç™", category: "Sweets & Snacks", image: "https://static.wixstatic.com/media/163af4_9b4713713ca44be29f4b3cedd665d38c~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_9b4713713ca44be29f4b3cedd665d38c~mv2.jpg" },
            { id: 28, name: "Janthikalu", price: 150, icon: "üçò", category: "Sweets & Snacks", image: "https://static.wixstatic.com/media/163af4_a2137bc79ea74d20af5fd90b82f88e3b~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_a2137bc79ea74d20af5fd90b82f88e3b~mv2.jpg" },
            { id: 29, name: "Chekkalu - Pachi Karam & Sago", price: 170, icon: "üçò", category: "Sweets & Snacks", image: "https://static.wixstatic.com/media/163af4_281785428c1a4f1ebb5821acf8cbd370~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_281785428c1a4f1ebb5821acf8cbd370~mv2.jpg" },
            { id: 30, name: "Chekkalu", price: 150, icon: "üçò", category: "Sweets & Snacks", image: "https://static.wixstatic.com/media/163af4_ba68548805f943cb9e2e8f6fc31f57f3~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_ba68548805f943cb9e2e8f6fc31f57f3~mv2.jpg" },
            // COMBOS
            { id: 31, name: "Chicken + Coriander Combo", price: 800, icon: "üéÅ", category: "Combos", image: "https://static.wixstatic.com/media/163af4_7dc576230bc64852b4861a7bcb77015c~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_7dc576230bc64852b4861a7bcb77015c~mv2.jpg" },
            { id: 32, name: "Avakaya + Tomato Combo", price: 550, icon: "üéÅ", category: "Combos", image: "https://static.wixstatic.com/media/163af4_a5be29aba0f7461583b94fe4daa4f830~mv2.jpg/v1/fill/w_300,h_300,al_c,q_80/163af4_a5be29aba0f7461583b94fe4daa4f830~mv2.jpg" }
        ];

        // Categories from seasaltpickles.com
        const CATEGORIES = [
            { name: "All", key: "all" },
            { name: "Veg Pickles", key: "Veg Pickles" },
            { name: "Non Veg Pickles", key: "Non Veg Pickles" },
            { name: "Masalas & Podis", key: "Masalas & Podis" },
            { name: "Sweets & Snacks", key: "Sweets & Snacks" },
            { name: "Combos", key: "Combos" }
        ];

        // =====================================================
        // STATE MANAGEMENT
        // =====================================================
        let state = {
            currentUser: null,
            wallet: 0,
            cart: [],
            isSpinning: false
        };

        // =====================================================
        // LOCAL STORAGE HELPERS
        // =====================================================
        function getFromStorage(key) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            } catch (e) {
                console.error('Error reading from localStorage:', e);
                return null;
            }
        }

        function saveToStorage(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (e) {
                console.error('Error writing to localStorage:', e);
            }
        }

        // =====================================================
        // USER MANAGEMENT
        // =====================================================
        function getUsers() {
            return getFromStorage(CONFIG.LOCAL_STORAGE_KEYS.USERS) || {};
        }

        function saveUser(phone, userData) {
            const users = getUsers();
            users[phone] = userData;
            saveToStorage(CONFIG.LOCAL_STORAGE_KEYS.USERS, users);
        }

        function getUserByPhone(phone) {
            const users = getUsers();
            return users[phone] || null;
        }

        function hasUserSpun(phone) {
            const user = getUserByPhone(phone);
            return user && user.hasSpun;
        }

        // =====================================================
        // SPIN COUNT & WIN PROBABILITY MANAGEMENT
        // =====================================================
        function getSpinCount() {
            return getFromStorage(CONFIG.LOCAL_STORAGE_KEYS.SPIN_COUNT) || { total: 0, sinceLastWin: 0 };
        }

        function incrementSpinCount(didWin) {
            const counts = getSpinCount();
            counts.total++;
            
            if (didWin) {
                counts.sinceLastWin = 0;
            } else {
                counts.sinceLastWin++;
            }
            
            saveToStorage(CONFIG.LOCAL_STORAGE_KEYS.SPIN_COUNT, counts);
            return counts;
        }

        /**
         * Determines if this spin should be a win
         * Logic: Guarantees exactly 1 win per 20 unique users
         * - If 19 spins have occurred since last win, next spin MUST win
         * - Otherwise, random chance with 5% probability
         * - Anti-manipulation: Result is determined server-side logic (simulated)
         */
        function shouldWin() {
            const counts = getSpinCount();
            
            // If 19 spins have happened since last win, force a win
            if (counts.sinceLastWin >= CONFIG.WIN_PROBABILITY - 1) {
                return true;
            }
            
            // Otherwise, 5% random chance
            // Using cryptographically secure random when available
            let randomValue;
            if (window.crypto && window.crypto.getRandomValues) {
                const array = new Uint32Array(1);
                window.crypto.getRandomValues(array);
                randomValue = array[0] / (0xFFFFFFFF + 1);
            } else {
                randomValue = Math.random();
            }
            
            return randomValue < (1 / CONFIG.WIN_PROBABILITY);
        }

        // =====================================================
        // WALLET MANAGEMENT
        // =====================================================
        function getWallet() {
            return getFromStorage(CONFIG.LOCAL_STORAGE_KEYS.WALLET) || 0;
        }

        function setWallet(amount) {
            saveToStorage(CONFIG.LOCAL_STORAGE_KEYS.WALLET, amount);
            state.wallet = amount;
            updateWalletDisplay();
        }

        function addToWallet(amount) {
            const currentBalance = getWallet();
            setWallet(currentBalance + amount);
        }

        function deductFromWallet(amount) {
            const currentBalance = getWallet();
            const newBalance = Math.max(0, currentBalance - amount);
            setWallet(newBalance);
            return currentBalance - newBalance; // Return actual deducted amount
        }

        function updateWalletDisplay() {
            const walletAmount = document.getElementById('walletAmount');
            const walletDisplay = document.getElementById('walletDisplay');
            
            walletAmount.textContent = state.wallet;
            
            if (state.wallet > 0) {
                walletDisplay.classList.add('has-balance');
            } else {
                walletDisplay.classList.remove('has-balance');
            }
        }

        // =====================================================
        // CART MANAGEMENT
        // =====================================================
        function getCart() {
            return getFromStorage(CONFIG.LOCAL_STORAGE_KEYS.CART) || [];
        }

        function saveCart() {
            saveToStorage(CONFIG.LOCAL_STORAGE_KEYS.CART, state.cart);
        }

        function addToCart(productId) {
            const product = PRODUCTS.find(p => p.id === productId);
            if (!product) return;

            const existingItem = state.cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                state.cart.push({ ...product, quantity: 1 });
            }
            
            saveCart();
            renderCart();
            showToast('success', `${product.name} added to cart!`);
        }

        function removeFromCart(productId) {
            state.cart = state.cart.filter(item => item.id !== productId);
            saveCart();
            renderCart();
        }

        function updateQuantity(productId, change) {
            const item = state.cart.find(item => item.id === productId);
            if (!item) return;

            item.quantity += change;
            
            if (item.quantity <= 0) {
                removeFromCart(productId);
                return;
            }
            
            saveCart();
            renderCart();
        }

        function getCartTotal() {
            return state.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        }

        function getCartItemCount() {
            return state.cart.reduce((count, item) => count + item.quantity, 0);
        }

        // =====================================================
        // UI RENDERING
        // =====================================================
        function renderProducts(categoryFilter = 'all') {
            const grid = document.getElementById('productsGrid');
            
            const filteredProducts = categoryFilter === 'all' 
                ? PRODUCTS 
                : PRODUCTS.filter(p => p.category === categoryFilter);
            
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card">
                    <div class="product-image">
                        ${product.image ? `<img src="${product.image}" alt="${product.name}" style="width:100%;height:100%;object-fit:cover;border-radius:12px;">` : product.icon}
                    </div>
                    <div class="product-info">
                        <div class="product-category-tag">${product.category || ''}</div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">‚Çπ${product.price}</div>
                        <button class="add-to-cart-btn" onclick="addToCart(${product.id})">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterByCategory(category) {
            renderProducts(category);
            // Update active state on category buttons
            document.querySelectorAll('.category-filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            const cartCountBadge = document.getElementById('cartCountBadge');
            
            const itemCount = getCartItemCount();
            cartCountBadge.textContent = itemCount;

            if (state.cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">üõí</div>
                        <p>Your cart is empty</p>
                    </div>
                `;
                cartSummary.style.display = 'none';
                return;
            }

            cartItems.innerHTML = state.cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image">
                        ${item.image ? `<img src="${item.image}" alt="${item.name}" style="width:100%;height:100%;object-fit:cover;border-radius:8px;">` : item.icon}
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">‚Çπ${item.price * item.quantity}</div>
                    </div>
                    <div class="cart-item-qty">
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">‚àí</button>
                        <span class="qty-value">${item.quantity}</span>
                        <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.id})">√ó</button>
                </div>
            `).join('');

            // Update summary
            cartSummary.style.display = 'block';
            updateCartSummary();
        }

        function updateCartSummary() {
            const cartTotal = getCartTotal();
            const walletBalance = state.wallet;
            const walletToApply = Math.min(walletBalance, cartTotal);
            const finalAmount = cartTotal - walletToApply;

            document.getElementById('cartTotalDisplay').textContent = `‚Çπ${cartTotal}`;
            
            const walletAppliedRow = document.getElementById('walletAppliedRow');
            if (walletBalance > 0 && cartTotal > 0) {
                walletAppliedRow.style.display = 'flex';
                document.getElementById('walletAppliedAmount').textContent = `-‚Çπ${walletToApply}`;
            } else {
                walletAppliedRow.style.display = 'none';
            }

            document.getElementById('finalAmount').textContent = `‚Çπ${finalAmount}`;
            
            const checkoutBtn = document.getElementById('checkoutBtn');
            checkoutBtn.disabled = state.cart.length === 0;
        }

        function showUserInfo() {
            if (!state.currentUser) return;

            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('userAvatar').textContent = state.currentUser.name.charAt(0).toUpperCase();
            document.getElementById('userName').textContent = state.currentUser.name;
            document.getElementById('userPhone').textContent = `+91 ${state.currentUser.phone}`;
        }

        // =====================================================
        // SPIN WHEEL LOGIC
        // =====================================================
        function spinWheel() {
            if (state.isSpinning) return;
            
            const spinBtn = document.getElementById('spinBtn');
            const wheel = document.getElementById('wheel');
            
            state.isSpinning = true;
            spinBtn.disabled = true;
            spinBtn.textContent = 'üé∞ SPINNING...';

            // Determine win/lose BEFORE animation
            const isWinner = shouldWin();
            
            // Calculate final rotation
            // Each segment is 45 degrees (360/8)
            // Win segments are at positions 1 and 5 (45-90¬∞ and 225-270¬∞)
            let finalAngle;
            
            if (isWinner) {
                // Land on win segment (positions 1 or 5: 45-90¬∞ or 225-270¬∞)
                const winPositions = [67.5, 247.5]; // Center of win segments
                finalAngle = winPositions[Math.floor(Math.random() * winPositions.length)];
            } else {
                // Land on lose segment (avoiding positions 1 and 5)
                const losePositions = [22.5, 112.5, 157.5, 202.5, 292.5, 337.5];
                finalAngle = losePositions[Math.floor(Math.random() * losePositions.length)];
            }

            // Add multiple full rotations + final position
            // We need to rotate opposite direction since pointer is at top
            const totalRotation = 360 * 8 + (360 - finalAngle);
            
            wheel.style.transition = `transform ${CONFIG.SPIN_DURATION}ms cubic-bezier(0.17, 0.67, 0.12, 0.99)`;
            wheel.style.transform = `rotate(${totalRotation}deg)`;

            // Handle result after spin completes
            setTimeout(() => {
                handleSpinResult(isWinner);
            }, CONFIG.SPIN_DURATION + 500);
        }

        function handleSpinResult(isWinner) {
            // Update user record
            const user = getUserByPhone(state.currentUser.phone);
            user.hasSpun = true;
            user.won = isWinner;
            user.spinDate = new Date().toISOString();
            saveUser(state.currentUser.phone, user);

            // Update spin count
            incrementSpinCount(isWinner);

            // Show result
            showResultModal(isWinner);

            if (isWinner) {
                addToWallet(CONFIG.WIN_AMOUNT);
                createConfetti();
            }

            state.isSpinning = false;
            
            // Hide spin button, show already spun message
            document.getElementById('spinBtn').style.display = 'none';
            document.getElementById('wheelContainer').style.display = 'none';
            document.getElementById('alreadySpun').style.display = 'block';
            
            if (isWinner) {
                document.getElementById('alreadySpun').innerHTML = `
                    <h3>üéâ You Won ‚Çπ500!</h3>
                    <p>Your wallet has been credited. Use it in our shop!</p>
                `;
            }
        }

        function showResultModal(isWinner) {
            const modal = document.getElementById('resultModal');
            const modalContent = document.getElementById('modalContent');
            const modalIcon = document.getElementById('modalIcon');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalAmount = document.getElementById('modalAmount');

            if (isWinner) {
                modalContent.className = 'modal win';
                modalIcon.textContent = 'üéâ';
                modalTitle.textContent = 'Congratulations!';
                modalMessage.textContent = 'You\'ve won wallet credits!';
                modalAmount.style.display = 'block';
                modalAmount.textContent = `‚Çπ${CONFIG.WIN_AMOUNT}`;
            } else {
                modalContent.className = 'modal';
                modalIcon.textContent = 'üòî';
                modalTitle.textContent = 'Better Luck Next Time!';
                modalMessage.textContent = 'Don\'t worry, check out our amazing products!';
                modalAmount.style.display = 'none';
            }

            modal.classList.add('active');
        }

        function closeResultModal() {
            document.getElementById('resultModal').classList.remove('active');
        }

        // =====================================================
        // CONFETTI ANIMATION
        // =====================================================
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            const colors = ['#FFD700', '#FF6B6B', '#6C63FF', '#27AE60', '#F39C12', '#E91E63'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    
                    if (Math.random() > 0.5) {
                        confetti.style.borderRadius = '50%';
                    }
                    
                    container.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // =====================================================
        // TOAST NOTIFICATIONS
        // =====================================================
        function showToast(type, message) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');

            toast.className = `toast ${type}`;
            toastIcon.textContent = type === 'success' ? '‚úÖ' : '‚ùå';
            toastMessage.textContent = message;

            toast.classList.add('active');
            
            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // =====================================================
        // CHECKOUT
        // =====================================================
        function checkout() {
            if (state.cart.length === 0) return;

            const cartTotal = getCartTotal();
            const walletBalance = state.wallet;
            const walletToApply = Math.min(walletBalance, cartTotal);
            const finalAmount = cartTotal - walletToApply;

            // Deduct wallet balance
            if (walletToApply > 0) {
                deductFromWallet(walletToApply);
            }

            // Clear cart
            state.cart = [];
            saveCart();
            renderCart();
            updateCartSummary();

            // Show success message
            showToast('success', `Order placed! Paid ‚Çπ${finalAmount} (Wallet: ‚Çπ${walletToApply} applied)`);
            
            // Show confirmation alert
            setTimeout(() => {
                alert(`üéâ Order Confirmed!\n\nCart Total: ‚Çπ${cartTotal}\nWallet Applied: ‚Çπ${walletToApply}\nAmount Paid: ‚Çπ${finalAmount}\n\nThank you for shopping with us!`);
            }, 500);
        }

        // =====================================================
        // FORM VALIDATION & LOGIN
        // =====================================================
        function validateForm() {
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            
            let isValid = true;

            // Validate name
            const nameGroup = document.getElementById('nameGroup');
            if (!name || name.length < 2) {
                nameGroup.classList.add('invalid');
                isValid = false;
            } else {
                nameGroup.classList.remove('invalid');
            }

            // Validate phone (10 digits)
            const phoneGroup = document.getElementById('phoneGroup');
            const phoneRegex = /^[6-9]\d{9}$/;
            if (!phoneRegex.test(phone)) {
                phoneGroup.classList.add('invalid');
                isValid = false;
            } else {
                phoneGroup.classList.remove('invalid');
            }

            return isValid;
        }

        function handleLogin() {
            if (!validateForm()) return;

            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();

            // Check if user has already spun
            if (hasUserSpun(phone)) {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('alreadySpun').style.display = 'block';
                
                // Check if they won previously
                const user = getUserByPhone(phone);
                if (user && user.won) {
                    document.getElementById('alreadySpun').innerHTML = `
                        <h3>üéâ You Already Won!</h3>
                        <p>You've already won ‚Çπ500! Check your wallet and shop now.</p>
                    `;
                }
                
                // Load their wallet balance
                state.currentUser = user;
                showUserInfo();
                return;
            }

            // Create/update user
            let user = getUserByPhone(phone);
            if (!user) {
                user = {
                    name: name,
                    phone: phone,
                    hasSpun: false,
                    won: false,
                    createdAt: new Date().toISOString()
                };
            } else {
                user.name = name;
            }
            
            saveUser(phone, user);
            state.currentUser = user;
            
            saveToStorage(CONFIG.LOCAL_STORAGE_KEYS.CURRENT_USER, user);

            // Update UI
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('wheelContainer').style.display = 'block';
            document.getElementById('spinBtn').style.display = 'block';
            document.getElementById('spinBtn').disabled = false;
            
            showUserInfo();
            showToast('success', `Welcome, ${name}! You can now spin the wheel.`);
        }

        // =====================================================
        // TAB NAVIGATION
        // =====================================================
        function initTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    
                    // Update active tab button
                    tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Update active tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });
        }

        // =====================================================
        // CREATE PARTICLES
        // =====================================================
        function createParticles() {
            const container = document.getElementById('particles');
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                
                const colors = ['#FFD700', '#FF6B6B', '#6C63FF', '#27AE60'];
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                container.appendChild(particle);
            }
        }

        // =====================================================
        // INITIALIZATION
        // =====================================================
        function init() {
            // Load saved state
            state.wallet = getWallet();
            state.cart = getCart();
            state.currentUser = getFromStorage(CONFIG.LOCAL_STORAGE_KEYS.CURRENT_USER);

            // Update UI
            updateWalletDisplay();
            renderProducts();
            renderCart();
            initTabs();
            createParticles();

            // Check if user is already logged in and has spun
            if (state.currentUser) {
                const user = getUserByPhone(state.currentUser.phone);
                if (user) {
                    state.currentUser = user;
                    showUserInfo();
                    
                    if (user.hasSpun) {
                        document.getElementById('loginForm').style.display = 'none';
                        document.getElementById('alreadySpun').style.display = 'block';
                        
                        if (user.won) {
                            document.getElementById('alreadySpun').innerHTML = `
                                <h3>üéâ You Already Won!</h3>
                                <p>You've already won ‚Çπ500! Check your wallet and shop now.</p>
                            `;
                        }
                    } else {
                        document.getElementById('loginForm').style.display = 'none';
                        document.getElementById('wheelContainer').style.display = 'block';
                        document.getElementById('spinBtn').style.display = 'block';
                        document.getElementById('spinBtn').disabled = false;
                    }
                }
            }

            // Event Listeners
            document.getElementById('loginBtn').addEventListener('click', handleLogin);
            document.getElementById('spinBtn').addEventListener('click', spinWheel);
            document.getElementById('modalBtn').addEventListener('click', closeResultModal);
            document.getElementById('checkoutBtn').addEventListener('click', checkout);

            // Enter key support for form
            document.getElementById('phone').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleLogin();
            });

            // Input validation - only numbers for phone
            document.getElementById('phone').addEventListener('input', (e) => {
                e.target.value = e.target.value.replace(/\D/g, '').slice(0, 10);
            });

            // Real-time validation
            document.getElementById('name').addEventListener('blur', validateForm);
            document.getElementById('phone').addEventListener('blur', validateForm);

            console.log('üé° Spin Wheel Campaign Initialized');
            console.log(`üìä Current spin count:`, getSpinCount());
        }

        // Run initialization when DOM is ready
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
